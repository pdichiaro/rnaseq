report_comment: >
  This report has been generated by the <a href="https://github.com/pdichiaro/rnaseq/"
  target="_blank">pdichiaro/rnaseq</a> analysis pipeline</a>.
report_section_order:
  # Important checks and failures
  sample-status:
    order: 5004
  fail_trimmed_samples-module:
    order: 5003
  fail_mapped_samples-module:
    order: 5002
  fail_strand_check-module:
    order: 5001
  # Preprocessing and pre-alignment QC
  fastqc_raw:
    order: 4004
  cutadapt:
    order: 4003
  fastp:
    order: 4003
  fastqc_trimmed:
    order: 4002
  # Alignment
  star:
    order: 3000
  hisat2:
    order: 3000
  # Post-alignment QC
  samtools:
    order: 3000
  dupradar-module:
    order: 3000
  featurecounts_biotype:
    order: 3000
  picard:
    order: 3000
  preseq:
    order: 3000
  qualimap:
    order: 3000
  rseqc:
    order: 3000
  umitools:
    order: 3000
  # Quantification
  genome:
    order: 2000
  rsem:
    order: 2000
  salmon:
    order: 2000
  kallisto:
    order: 2000
  # Post-quantification QC
  sample-relationships:
    order: 1020
  # DESeq2 QC parent sections (one per quantifier)
  deseq2-kallisto-qc:
    order: 1005
  deseq2-salmon-qc:
    order: 1004
  deseq2-star-salmon-qc:
    order: 1003
  deseq2-star-rsem-qc:
    order: 1002
  deseq2-star-genome-qc:
    order: 1001
  deseq2-hisat2-genome-qc:
    order: 1000
  # Summaries
  "nf-core-rnaseq-methods-description-module":
    order: -1000
  "software_versions-module":
    order: -1001
  "nf-core-rnaseq-summary-module":
    order: -1002

export_plots: true
disable_version_detection: true
sample_names_replace_exact: true

# DESeq2 plot ordering within parent sections handled by numbered prefixes in plot titles
# (1., 2., 3., 4.) to force alphabetical sorting since plot_order doesn't work in nested sections

# Run only these modules
run_modules:
  - custom_content
  - fastqc
  - cutadapt
  - fastp
  - sortmerna
  - star
  - hisat2
  - rsem
  - umitools
  - salmon
  - kallisto
  - samtools
  - picard
  - preseq
  - rseqc
  - qualimap
  - kraken

# Order of modules

module_order:
  - fastqc:
      anchor: "fastqc_raw"
      name: "FastQC (raw)"
      info: "This section of the report shows FastQC results before adapter trimming."
      path_filters:
        - "*_raw*fastqc.zip"
  - cutadapt
  - fastp
  - fastqc:
      anchor: "fastqc_trimmed"
      name: "FastQC (trimmed)"
      info: "This section of the report shows FastQC results after adapter trimming."
      path_filters:
        - "*_trimmed*fastqc.zip"


# Don't show % Dups in the General Stats table (we have this from Picard)
table_columns_visible:
  "FastQC (raw)":
    percent_duplicates: false
  "FastQC (trimmed)":
    percent_duplicates: false
  "Kallisto":
    n_unique: true

extra_fn_clean_exts:
  - ".umi_dedup"
  - "_val"
  - ".markdup"
  - "_primary"

# Customise the module search patterns to speed up execution time
#  - Skip module sub-tools that we are not interested in
#  - Replace file-content searching with filename pattern searching
#  - Don't add anything that is the same as the MultiQC default
# See https://multiqc.info/docs/#optimise-file-search-patterns for details
sp:
  sortmerna:
    fn: "*.sortmerna.log"

  kraken:
    - fn: "*.kraken2.report.txt"
    - fn: "*.kraken2.report_bracken.txt"
  rseqc/bam_stat:
    fn: "*.bam_stat.txt"
  rseqc/gene_body_coverage:
    skip: true
  rseqc/junction_annotation:
    fn: "*.junction_annotation.log"
  rseqc/read_gc:
    skip: true
  rseqc/read_distribution:
    fn: "*.read_distribution.txt"
  rseqc/infer_experiment:
    fn: "*.infer_experiment.txt"
  rseqc/tin:
    fn: "*.summary.txt"

  picard/markdups:
    fn: "*.MarkDuplicates.metrics.txt"
  picard/alignment_metrics:
    skip: true
  picard/basedistributionbycycle:
    skip: true
  picard/gcbias:
    skip: true
  picard/hsmetrics:
    skip: true
  picard/insertsize:
    skip: true
  picard/oxogmetrics:
    skip: true
  picard/pcr_metrics:
    skip: true
  picard/quality_by_cycle:
    skip: true
  picard/quality_score_distribution:
    skip: true
  picard/quality_yield_metrics:
    skip: true
  picard/rnaseqmetrics:
    skip: true
  picard/rrbs_metrics:
    skip: true
  picard/sam_file_validation:
    skip: true
  picard/variant_calling_metrics:
    skip: true
  picard/wgs_metrics:
    skip: true

  # DESeq2 custom content is now handled via headers added by DESEQ2_TRANSFORM module

fn_ignore_files:
  - "*umi_dedup.transcriptome.sorted.log"

# DESeq2 plots now handled dynamically by DESEQ2_TRANSFORM module headers
# The module adds parent_id/parent_name for all quantifiers automatically
